import{u as j,r as S,j as t}from"./index-DwkGyXRE.js";import{B as i}from"./Button-nWPDMw_E.js";import{T as u}from"./TextArea-BGoBekBT.js";import{T as p}from"./ToolSection-DOJU4p5W.js";import{c as g}from"./clipboard-4Xj0hnU0.js";import{f as y,m as N,v as J}from"./format-DWKMCu3E.js";import{u as C}from"./usePersistentState-zXW_hf9u.js";const T=()=>({input:"",output:"",status:""}),k=`{
  "service": "web-tools-station",
  "version": "1.0.0",
  "features": ["format", "minify", "validate"],
  "metadata": {
    "updatedAt": "2025-01-08T09:30:00Z",
    "owner": "dev-team"
  }
}`,B=()=>{const[f,e,x]=C("tool:json",T),{input:a,output:l,status:m}=f,{t:r}=j(),c=o=>{try{if(o==="format"&&e(s=>({...s,output:y(a),status:r("格式化成功")})),o==="minify"&&e(s=>({...s,output:N(a),status:r("压缩成功")})),o==="validate"){const s=J(a);s.valid?e(n=>({...n,status:r("JSON 校验通过")})):e(n=>({...n,status:r("无效的 JSON: ${result.message}").replace("${result.message}",s.message)}))}}catch(s){e(n=>({...n,status:r("操作失败: ${error.message}").replace("${error.message}",s.message)}))}},h=()=>{x()},v=()=>{e(o=>({...o,input:k,output:"",status:""}))},d=S.useMemo(()=>m,[m]);return t.jsxs("div",{className:"space-y-6",children:[t.jsxs(p,{title:"JSON 工具",description:"支持 JSON 的格式化、压缩与结构校验。",actions:t.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[t.jsx(i,{onClick:()=>c("format"),disabled:!a.trim(),children:"格式化"}),t.jsx(i,{onClick:()=>c("minify"),disabled:!a.trim(),children:"压缩"}),t.jsx(i,{variant:"secondary",onClick:()=>c("validate"),disabled:!a.trim(),children:"校验"}),t.jsx(i,{variant:"ghost",onClick:v,children:r("载入示例")}),t.jsx(i,{variant:"secondary",onClick:h,children:"清空"})]}),children:[t.jsx(u,{placeholder:"粘贴 JSON 数据",value:a,onChange:o=>e(s=>({...s,input:o.target.value})),className:"min-h-[240px] font-mono"}),d?t.jsx("p",{className:"mt-3 text-sm text-slate-500 dark:text-slate-300",children:d}):null]}),t.jsx(p,{title:"输出",actions:t.jsx(i,{variant:"secondary",onClick:()=>g(l),disabled:!l,children:"复制结果"}),children:t.jsx(u,{value:l,readOnly:!0,className:"min-h-[240px] font-mono"})})]})};export{B as default};
