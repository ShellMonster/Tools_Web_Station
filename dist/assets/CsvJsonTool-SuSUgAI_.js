import{r,u as g,j as s}from"./index-DwkGyXRE.js";import{B as d}from"./Button-nWPDMw_E.js";import{T as h}from"./TextArea-BGoBekBT.js";import{T as C}from"./ToolSection-DOJU4p5W.js";import{g as j,h as v}from"./format-DWKMCu3E.js";const y=()=>{const[o,l]=r.useState(""),[c,i]=r.useState(""),[x,t]=r.useState(""),[m,n]=r.useState(!1),{t:a}=g(),p=async()=>{n(!0);try{const e=await j(o);i(e),t("")}catch(e){t(a("转换失败: ${err.message}").replace("${err.message}",e.message))}finally{n(!1)}},u=async()=>{n(!0);try{const e=await v(c);l(e),t("")}catch(e){t(a("转换失败: ${err.message}").replace("${err.message}",e.message))}finally{n(!1)}};return s.jsxs(C,{title:"CSV ↔ JSON 转换",description:"在 CSV 与 JSON 数据之间快速切换，自动处理表头。",actions:s.jsx(d,{variant:"secondary",onClick:()=>{l(""),i(""),t("")},children:"清空"}),children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx(h,{placeholder:"CSV 内容",value:o,onChange:e=>l(e.target.value),className:"min-h-[220px] font-mono"}),s.jsx("div",{className:"mt-2 flex gap-2",children:s.jsx(d,{onClick:p,disabled:!o.trim()||m,children:a("转换为 JSON →")})})]}),s.jsxs("div",{children:[s.jsx(h,{placeholder:"JSON 内容",value:c,onChange:e=>i(e.target.value),className:"min-h-[220px] font-mono"}),s.jsx("div",{className:"mt-2 flex gap-2",children:s.jsx(d,{onClick:u,disabled:!c.trim()||m,children:a("← 转换为 CSV")})})]})]}),m?s.jsx("p",{className:"mt-3 text-sm text-slate-500",children:a("处理中…")}):null,x?s.jsx("p",{className:"mt-3 text-sm text-red-500",children:x}):null]})};export{y as default};
